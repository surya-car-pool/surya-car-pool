<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Surya Car Pool | Book a Self-Drive Car</title>

	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Bootstrap -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

	<style>
		:root {
			--primary: #0d6efd;
			--accent: #6610f2;
			--orange: #ff9800;
			--green: #28a745;
			--max-width: 1200px;
		}

		body {
			font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto;
			background: linear-gradient(180deg, #f8fafc 0%, #eef2ff 100%);
		}

		.navbar-custom {
			background: rgba(15, 23, 42, 0.95);
			backdrop-filter: blur(8px);
		}

		/* PAGE HERO */
		.page-hero {
			max-width: var(--max-width);
			margin: 2rem auto;
			padding: 2.5rem;
			border-radius: 22px;
			background: linear-gradient(135deg, #0d6efd, #6610f2);
			color: #fff;
			text-align: center;
		}

		.page-hero span {
			color: #ffd166;
		}

		/* TRUST STRIP */
		.trust-strip {
			max-width: var(--max-width);
			margin: 1.5rem auto;
			padding: 1.2rem;
			background: #fff;
			border-radius: 16px;
			box-shadow: 0 10px 30px rgba(0, 0, 0, .08);
		}

		.trust-item i {
			font-size: 28px;
			margin-bottom: 6px;
		}

		/* CAR CARD */
		.car-card {
			border: 0;
			border-radius: 18px;
			box-shadow: 0 12px 30px rgba(0, 0, 0, .08);
			height: 100%;
			transition: transform .2s ease;
		}

		.car-card:hover {
			transform: translateY(-6px);
		}

		.badge-seats {
			background: linear-gradient(90deg, var(--primary), var(--accent));
			color: #fff;
		}
	</style>
</head>

<body class="bg-light">
	<!-- NAVBAR -->
	<nav class="navbar navbar-expand-lg navbar-dark navbar-custom">
		<div class="container">
			<a class="navbar-brand d-flex align-items-center brand-logo" href="/home" aria-label="Surya Car Pool home">
				<!-- Inline SVG logo (kept simple & accessible) -->
				<svg class="brand-svg" viewBox="0 0 64 64" xmlns="/images/logo.png" role="img"
					aria-labelledby="logoTitle logoDesc">
					<title id="logoTitle">Surya Car Pool logo</title>
					<desc id="logoDesc">Sun rising above a road â€” Surya Car Pool</desc>
					<img src="/images/logo.png" alt="Surya Car Pool"
						style="width:70px; height:70px; border-radius:14px; object-fit:contain;" />
					<rect width="64" height="64" rx="10" fill="url(#g1)" />
					<circle cx="20" cy="18" r="8" fill="#fff5d6" />
					<path d="M6 44 C18 38,46 38,58 44 L58 50 C46 44,18 44,6 50 Z" fill="#0f1724" />
					<g stroke="#ffd166" stroke-width="1.8" stroke-linecap="round">
						<path d="M12 43 L16 43" stroke-dasharray="4 3" />
						<path d="M24 42 L28 42" stroke-dasharray="4 3" />
						<path d="M36 42 L40 42" stroke-dasharray="4 3" />
						<path d="M48 43 L52 43" stroke-dasharray="4 3" />
					</g>
					<path d="M18 36 h10 l3-5 h8 l3 5 h3 v3 h-30 v-3 z" fill="#fff" />
				</svg>

				<div class="d-flex flex-column">
					<span class="brand-title text-white">Surya Car Pool</span>
					<span class="brand-tagline text-white-50">Self Drive Cars Provider</span>
				</div>

				<span class="ms-3 badge bg-white text-dark align-self-start" style="font-weight:600">Trusted</span>
			</a>

			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMain">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse" id="navMain">
				<ul class="navbar-nav ms-auto mb-2 mb-lg-0">
					<li class="nav-item">
						<a class="nav-link" href="/home">
							<i class="bi bi-house-door-fill"></i> Home
						</a>
					</li>

					<li class="nav-item">
						<a class="nav-link" href="/users/ui">
							<i class="bi bi-people-fill"></i> Users
						</a>
					</li>

					<li class="nav-item">
						<a class="nav-link" href="/rides/ui">
							<i class="bi bi-car-front-fill"></i> Rides
						</a>
					</li>

					<li class="nav-item">
						<a class="nav-link" href="/bookings/ui">
							<i class="bi bi-journal-check"></i> Bookings
						</a>
					</li>

					<li class="nav-item">
						<a class="nav-link" href="/aboutus/ui">
							<i class="bi bi-info-circle-fill"></i> About Us
						</a>
					</li>

					<li class="nav-item">
						<a class="nav-link" href="/contactus/ui">
							<i class="bi bi-envelope-fill"></i> Contact Us
						</a>
					</li>
				</ul>
			</div>
		</div>
	</nav>
	<!-- HERO -->
	<section class="page-hero">
		<h1 class="fw-bold">
			Become a <span>Surya Car Pool Partner</span>
		</h1>
		<p class="lead mt-3">
			Attach your car, reach verified customers, and earn passive incom!
		</p>

		<a href="/home" class="btn btn-outline-light mt-3">
			<i class="bi bi-arrow-left"></i> Back to Home
		</a>
	</section>

	<div class="container py-4">

		<div id="alertPlaceholder"></div>

		<div class="d-flex justify-content-between align-items-center mb-3">
			<h3 class="mb-0">Attachment Owner & Car Details</h3>
			<!--<a href="/users/ui" class="btn btn-outline-secondary">
				<i class="bi bi-arrow-left"></i> Back to Owners
			</a>-->
		</div>

		<div class="row">
			<div class="col-lg-8 col-md-10">
				<div class="card shadow-sm">
					<div class="card-body">

						<!-- OWNER LOGIN & CONTACT -->
						<div class="mb-2">
							<label class="form-label">
								<i class="bi bi-person-fill me-1 text-primary"></i>
								Full Name <span class="text-danger">*</span>
							</label>
							<input id="name" type="text" class="form-control" required>
						</div>

						<div class="mb-2">
							<label class="form-label">
								<i class="bi bi-envelope-fill me-1 text-primary"></i>
								Email <span class="text-danger">*</span>
							</label>
							<input id="email" type="email" class="form-control" required>
						</div>

						<div class="mb-2">
							<label class="form-label">
								<i class="bi bi-telephone-fill me-1 text-primary"></i>
								Phone <span class="text-danger">*</span>
							</label>
							<input id="phone" type="tel" class="form-control" required>
						</div>

						<div class="mb-3">
							<label class="form-label">
								<i class="bi bi-lock-fill me-1 text-primary"></i>
								Password <span class="text-danger">*</span>
							</label>
							<input id="password" type="password" class="form-control" required>
						</div>

						<!-- OWNER DETAILS -->
						<h6 class="text-primary mb-2">
							<i class="bi bi-person-badge-fill me-1"></i> Owner Details
						</h6>

						<div class="mb-2">
							<label class="form-label">
								<i class="bi bi-geo-alt-fill me-1 text-primary"></i>
								Address
							</label>
							<textarea id="ownerAddress" class="form-control" rows="2"></textarea>
						</div>

						<div class="row mb-2">
							<div class="col-md-6 mb-2">
								<label class="form-label">
									<i class="bi bi-buildings me-1 text-primary"></i>
									City
								</label>
								<input id="ownerCity" type="text" class="form-control">
							</div>

							<div class="col-md-6 mb-2">
								<label class="form-label">
									<i class="bi bi-map-fill me-1 text-primary"></i>
									State
								</label>
								<input id="ownerState" type="text" class="form-control">
							</div>
						</div>

						<div class="row mb-3">
							<div class="col-md-4 mb-2">
								<label class="form-label">
									<i class="bi bi-mailbox me-1 text-primary"></i>
									Pincode
								</label>
								<input id="ownerPincode" type="text" class="form-control">
							</div>

							<div class="col-md-4 mb-2">
								<label class="form-label">
									<i class="bi bi-person-vcard-fill me-1 text-primary"></i>
									Aadhaar No
								</label>
								<input id="ownerAadharNo" type="text" class="form-control">
							</div>

							<div class="col-md-4 mb-2">
								<label class="form-label">
									<i class="bi bi-credit-card-2-front-fill me-1 text-primary"></i>
									PAN No
								</label>
								<input id="ownerPanNo" type="text" class="form-control">
							</div>
						</div>

						<!-- CAR DETAILS -->
						<h6 class="text-primary mb-2">
							<i class="bi bi-car-front-fill me-1"></i> Car Details
						</h6>

						<div class="row mb-2">
							<div class="col-md-6 mb-2">
								<label class="form-label">
									<i class="bi bi-car-front-fill me-1 text-primary"></i>
									Name (Car / Company) <span class="text-danger">*</span>
								</label>
								<input id="carMake" type="text" class="form-control" required>
							</div>

							<div class="col-md-6 mb-2">
								<label class="form-label">
									<i class="bi bi-badge-tm-fill me-1 text-primary"></i>
									Model <span class="text-danger">*</span>
								</label>
								<input id="carModel" type="text" class="form-control" required>
							</div>
						</div>

						<div class="mb-2">
							<label class="form-label">
								<i class="bi bi-layers-fill me-1 text-primary"></i>
								Variant
							</label>
							<input id="carVariant" type="text" class="form-control">
						</div>

						<div class="mb-2">
							<label class="form-label">
								<i class="bi bi-card-list me-1 text-primary"></i>
								Registration No <span class="text-danger">*</span>
							</label>
							<input id="carRegistrationNo" type="text" class="form-control" required>
						</div>

						<div class="row mb-2">
							<div class="col-md-4 mb-2">
								<label class="form-label">
									<i class="bi bi-calendar-event-fill me-1 text-primary"></i>
									Year
								</label>
								<input id="carYear" type="number" class="form-control" min="1990" max="2100">
							</div>

							<div class="col-md-4 mb-2">
								<label class="form-label">
									<i class="bi bi-palette-fill me-1 text-primary"></i>
									Color
								</label>
								<input id="carColor" type="text" class="form-control">
							</div>

							<div class="col-md-4 mb-2">
								<label class="form-label">
									<i class="bi bi-people-fill me-1 text-primary"></i>
									Seats
								</label>
								<input id="carSeats" type="number" class="form-control" min="2" max="9">
							</div>
						</div>

						<div class="row mb-2">
							<div class="col-md-6 mb-2">
								<label class="form-label">
									<i class="bi bi-fuel-pump-fill me-1 text-primary"></i>
									Fuel Type
								</label>
								<select id="fuelType" class="form-select">
									<option value="">Select</option>
									<option>PETROL</option>
									<option>DIESEL</option>
									<option>CNG</option>
									<option>EV</option>
								</select>
							</div>

							<div class="col-md-6 mb-2">
								<label class="form-label">
									<i class="bi bi-gear-fill me-1 text-primary"></i>
									Transmission
								</label>
								<select id="transmissionType" class="form-select">
									<option value="">Select</option>
									<option>MANUAL</option>
									<option>AUTOMATIC</option>
								</select>
							</div>
						</div>
						<div class="row mb-3">
							<div class="col-md-6">
								<label class="form-label">
									<i class="bi bi-cash-stack me-1 text-primary"></i>
									Per Day Rent <span class="text-danger">*</span>
								</label>
								<div class="input-group">
									<span class="input-group-text">
										<i class="bi bi-currency-rupee"></i>
									</span>
									<input id="perDayRent" type="number" class="form-control" placeholder="0.00"
										step="0.01" min="0" required>
								</div>
							</div>

							<div class="col-md-6">
								<label class="form-label">
									<i class="bi bi-speedometer2 me-1 text-primary"></i>
									Per Km Rate <span class="text-danger">*</span>
								</label>
								<div class="input-group">
									<span class="input-group-text">
										<i class="bi bi-currency-rupee"></i>
									</span>
									<input id="perKmRate" type="number" class="form-control" placeholder="0.00"
										step="0.01" min="0" required>
								</div>
							</div>
						</div>


					</div>

					<div class="form-check mb-3">
						<input class="form-check-input" type="checkbox" id="enabled" checked>
						<label class="form-check-label" for="enabled">Enabled</label>
					</div>

					<button id="saveUserBtn" type="button" class="btn btn-primary">
						<i class="bi bi-save"></i> Save Owner & Car
					</button>

				</div>
			</div>
		</div>
	</div>

	</div>

	<script>
		function showAlert(message, type) {
			const placeholder = document.getElementById('alertPlaceholder');
			placeholder.innerHTML = `
            <div class="alert alert-${type} alert-dismissible fade show" role="alert">
              ${message}
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>`;
		}

		async function saveUser() {
			const name = document.getElementById('name').value.trim();
			const email = document.getElementById('email').value.trim();
			const phone = document.getElementById('phone').value.trim();
			const password = document.getElementById('password').value.trim();
			const enabled = document.getElementById('enabled').checked;

			const ownerAddress = document.getElementById('ownerAddress').value.trim();
			const ownerCity = document.getElementById('ownerCity').value.trim();
			const ownerState = document.getElementById('ownerState').value.trim();
			const ownerPincode = document.getElementById('ownerPincode').value.trim();
			const ownerAadharNo = document.getElementById('ownerAadharNo').value.trim();
			const ownerPanNo = document.getElementById('ownerPanNo').value.trim();

			const carMake = document.getElementById('carMake').value.trim();
			const carModel = document.getElementById('carModel').value.trim();
			const carVariant = document.getElementById('carVariant').value.trim();
			const carRegistrationNo = document.getElementById('carRegistrationNo').value.trim();
			const carYear = document.getElementById('carYear').value.trim();
			const carColor = document.getElementById('carColor').value.trim();
			const carSeats = document.getElementById('carSeats').value.trim();
			const fuelType = document.getElementById('fuelType').value.trim();
			const transmissionType = document.getElementById('transmissionType').value.trim();
			const perDayRent = document.getElementById('perDayRent').value.trim();
			const perKmRate = document.getElementById('perKmRate').value.trim();

			if (!name || !email || !phone || !password ||
				!carMake || !carModel || !carRegistrationNo ||
				!perDayRent || !perKmRate) {

				showAlert('Please fill all mandatory fields (*) before saving.', 'warning');
				return;
			}
			const user = {
				name: name,
				email: email,
				phone: phone,
				password: password,
				enabled: enabled,
				ownerAddress: ownerAddress,
				ownerCity: ownerCity,
				ownerState: ownerState,
				ownerPincode: ownerPincode,
				ownerAadharNo: ownerAadharNo,
				ownerPanNo: ownerPanNo,
				cars: [
					{
						make: carMake,
						model: carModel,
						variant: carVariant,
						registrationNo: carRegistrationNo,
						year: carYear ? parseInt(carYear, 10) : null,
						color: carColor,
						seats: carSeats ? parseInt(carSeats, 10) : null,
						fuelType: fuelType,
						transmissionType: transmissionType,
						perDayRent: perDayRent ? parseFloat(perDayRent) : null,
						perKmRate: perKmRate ? parseFloat(perKmRate) : null
					}
				]
			};

			try {
				const response = await fetch('/api/users', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json'
					},
					body: JSON.stringify(user)
				});

				if (!response.ok) {
					let msg = 'Failed to save owner & car.';
					try {
						const err = await response.json();
						if (err && err.message) {
							msg = err.message;
						}
					} catch (e) { }
					showAlert(msg, 'danger');
					return;
				}

				const saved = await response.json();
				showAlert('Owner & car created successfully (ID: ' + saved.id + '). Redirecting...', 'success');

				// ðŸ” Redirect to users.html (served at /users/ui)
				setTimeout(() => {
					window.location.href = '/users/ui';
				}, 1200);

			} catch (err) {
				console.error(err);
				showAlert('Error while saving owner & car.', 'danger');
			}
		}
		document.getElementById('saveUserBtn').addEventListener('click', saveUser);
	</script>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
	<!-- FOOTER -->
	<footer class="bg-dark text-light mt-5">
		<div class="container py-4 text-center small" style="color: brown;">
			Â© Surya Car Pool -2025 Â· All rights reserved
		</div>
		<div class="text-center text-muted small py-2" style="background:rgba(0,0,0,0.04)">
			Need help? Email <a href="mailto:support@suryacarpool.example"
				class="text-muted">support@suryacarpool.example</a> Â· Terms apply
		</div>
	</footer>
</body>

</html>