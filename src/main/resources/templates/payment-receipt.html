<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8" />
	<title>Payment Receipt — Surya Car Pool</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
	<style>
		:root {
			--bg1: #ffecd2;
			--bg2: #fcb69f;
			--accent1: #ff6b6b;
			--accent2: #ffd166;
			--accent3: #6a11cb;
			--card: #ffffffcc;
			--muted: #6c6c6c;
		}

		html,
		body {
			height: 100%;
		}

		body {
			margin: 0;
			font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
			background: radial-gradient(1200px 600px at 10% 10%, rgba(255, 123, 123, 0.08), transparent 8%),
				radial-gradient(800px 400px at 90% 90%, rgba(106, 17, 203, 0.06), transparent 8%),
				linear-gradient(135deg, var(--bg1), var(--bg2));
			color: #222;
			-webkit-font-smoothing: antialiased;
			-moz-osx-font-smoothing: grayscale;
			padding: 40px 16px;
		}

		.brand-row {
			display: flex;
			gap: 12px;
			align-items: center
		}

		.brand-mark {
			width: 56px;
			height: 56px;
			border-radius: 12px;
			display: inline-grid;
			place-items: center;
			color: white;
			font-weight: 700;
			background: linear-gradient(135deg, var(--accent1), var(--accent2));
			box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
		}

		.receipt-wrap {
			max-width: 980px;
			margin: 0 auto
		}

		.hero-card {
			background: var(--card);
			border-radius: 18px;
			padding: 28px;
			border: 1px solid rgba(255, 255, 255, 0.35);
			box-shadow: 0 20px 60px rgba(16, 24, 40, 0.12)
		}

		.status-badge {
			display: inline-flex;
			gap: 8px;
			align-items: center;
			padding: 8px 12px;
			border-radius: 999px;
			font-weight: 700
		}

		.status-success {
			background: linear-gradient(90deg, #d3ffd6, #b7ffbf);
			color: #08660f
		}

		.status-failed {
			background: linear-gradient(90deg, #ffd6d6, #ffb7b7);
			color: #8b0f0f
		}

		.status-pending {
			background: linear-gradient(90deg, #fff8d6, #fff0b7);
			color: #8b6f0f
		}

		.amount-pill {
			font-size: 1.6rem;
			font-weight: 800;
			padding: 8px 18px;
			border-radius: 999px;
			background: linear-gradient(90deg, #ffd166, #ff6b6b);
			color: white;
			box-shadow: 0 10px 30px rgba(255, 107, 107, 0.15)
		}

		.details-grid {
			display: grid;
			grid-template-columns: 1fr 1fr;
			gap: 18px;
			margin-top: 18px
		}

		.line-muted {
			color: var(--muted)
		}

		.invoice-table {
			width: 100%;
			border-collapse: collapse;
			margin-top: 14px
		}

		.invoice-table th {
			background: linear-gradient(90deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.4));
			text-align: left;
			padding: 12px;
			border-radius: 8px
		}

		.invoice-table td {
			padding: 12px;
			border-bottom: 1px dashed rgba(0, 0, 0, 0.06)
		}

		.actions {
			display: flex;
			gap: 12px;
			flex-wrap: wrap;
			margin-top: 18px
		}

		.confetti {
			position: absolute;
			inset: 0;
			pointer-events: none;
			opacity: 0.25
		}

		@media(max-width:900px) {
			.details-grid {
				grid-template-columns: 1fr
			}

			.brand-row {
				gap: 8px
			}
		}

		/* subtle entry animation */
		.hero-card {
			transform-origin: center;
			animation: cardIn .6s cubic-bezier(.2, .9, .3, 1) both
		}

		@keyframes cardIn {
			from {
				opacity: 0;
				transform: translateY(18px) scale(.995)
			}

			to {
				opacity: 1;
				transform: none
			}
		}
	</style>
</head>

<body>
	<div class="receipt-wrap position-relative">

		<!-- confetti svg for grand feel -->
		<svg class="confetti" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400" preserveAspectRatio="none"
			aria-hidden>
			<g fill-opacity="0.85">
				<circle cx="60" cy="40" r="6" fill="#ff6b6b" />
				<rect x="130" y="24" width="8" height="8" rx="2" fill="#ffd166" transform="rotate(20 134 28)" />
				<circle cx="240" cy="80" r="4" fill="#6a11cb" />
				<rect x="380" y="18" width="10" height="6" rx="2" fill="#ff6b6b" transform="rotate(-15 385 21)" />
				<circle cx="620" cy="48" r="5" fill="#24c3ff" />
				<rect x="720" y="120" width="8" height="8" rx="2" fill="#ffd166" transform="rotate(33 724 124)" />
			</g>
		</svg>

		<div class="hero-card">
			<div class="d-flex justify-content-between align-items-start flex-wrap">
				<div>
					<div class="brand-row">
						<div class="brand-mark p-0 overflow-hidden">
							<img th:src="@{/images/logo.png}" alt="Surya Car Pool Logo"
								style="width:100%; height:100%; object-fit:contain; padding:6px;" />
						</div>
						<div>
							<div class="h5 mb-0">Surya Car Pool</div>
							<div class="line-muted small">Payment receipt</div>
						</div>
					</div>

					<div class="mt-3">
						<div class="h4 fw-bold">Receipt <span class="text-muted fw-normal">#</span>
							<span th:text="${receipt.receiptNumber}" class="ms-2">RCPT-XXXX</span>
						</div>
						<div class="line-muted mt-1"> <strong>Date:</strong>
							<span th:text="${receipt.paymentDateTime}" class="ms-2">2025-12-11T10:00</span>
						</div>
					</div>
				</div>

				<div class="text-end mt-2">
					<div th:if="${receipt.status} == 'SUCCESS'" class="status-badge status-success">✓ SUCCESS</div>
					<div th:if="${receipt.status} == 'FAILED'" class="status-badge status-failed">✕ FAILED</div>
					<div th:if="${receipt.status} == 'PENDING'" class="status-badge status-pending">… PENDING</div>

					<div class="mt-3">
						<div class="amount-pill"
						     th:text="${receipt.amountPaid != null 
						         ? '₹ ' + #numbers.formatDecimal(receipt.amountPaid, 1, 2) 
						         : '₹ -'}">
						    ₹ 0.00
						</div>
					</div>
				</div>

				<hr style="margin:18px 0;border-top:1px solid rgba(0,0,0,0.06)" />

				<div class="details-grid">
					<div>
						<h6 class="mb-2">Customer</h6>
						<div><strong th:text="${receipt.customerName}">Customer Name</strong></div>
						<div class="line-muted small mt-1" th:text="${receipt.customerEmail}">customer@example.com</div>
						<div class="line-muted small" th:text="${receipt.customerPhone}">+91 9XXXXXXXXX</div>

						<div class="mt-3">
							<h6 class="mb-1">Pickup</h6>
							<div th:text="${receipt.pickupLocation}">Pickup Location</div>
							<div
								th:text="${receipt.pickupDateTime != null ? #temporals.format(receipt.pickupDateTime, 'dd MMM yyyy, hh:mm a') : '—'}">
								Pickup date/time</div>
						</div>
					</div>

					<div>
						<h6 class="mb-2">Booking</h6>
						<div><strong>Car ID:</strong> <span th:text="${receipt.carId}">123</span></div>
						<div class="mt-2"><strong>Payment method:</strong> <span
								th:text="${receipt.paymentMethod}">CARD</span></div>

						<div class="mt-3">
							<h6 class="mb-1">Transaction</h6>
							<div><strong>Txn ID:</strong> <span th:text="${receipt.transactionId}">TXN-000</span></div>
							<div class="line-muted small">Gateway: <span th:text="${receipt.gateway}">MockGateway</span>
							</div>
						</div>
					</div>
				</div>

				<div class="mt-4">
					<table class="invoice-table">
						<thead>
							<tr>
								<th>Description</th>
								<th style="width:160px;text-align:right">Amount</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Base fare</td>
								<td style="text-align:right" th:text="${receipt.baseFare}">₹ 0.00</td>
							</tr>
							<tr>
								<td>Taxes & fees</td>
								<td style="text-align:right" th:text="${receipt.taxes}">₹ 0.00</td>
							</tr>
							<tr>
								<td>Discounts</td>
								<td style="text-align:right" th:text="${receipt.discount}">-₹ 0.00</td>
							</tr>
							<tr>
								<td><strong>Total paid</strong></td>
								<td style="text-align:right;font-weight:800" th:text="${receipt.amountPaid}">₹ 0.00</td>
							</tr>
						</tbody>
					</table>
				</div>

				<div class="d-flex justify-content-between align-items-center flex-wrap mt-4">
					<div class="line-muted small">Need help? Contact <a
							href="mailto:support@surya-car-pool.example">support@surya-car-pool.example</a></div>
					<div class="actions">
						<button class="btn btn-outline-dark" onclick="window.print()">Print receipt</button>
						<a th:href="@{/bookings/ui}" class="btn btn-light">Make another booking</a>
						<a th:href="@{/}" class="btn btn-primary">Back to home</a>
					</div>
					<div class="actions mt-3 d-flex gap-2 flex-wrap">
						<button class="btn btn-success" onclick="window.print()">Print</button>
						<button class="btn btn-warning" onclick="downloadReceipt()">Download</button>
						<button class="btn btn-info text-white" onclick="shareReceipt()">Share</button>
					</div>

				</div>

			</div>

			<script>
				function downloadReceipt() {
					const element = document.documentElement.cloneNode(true);
					const blob = new Blob([element.outerHTML], {type: 'text/html'});
					const url = URL.createObjectURL(blob);
					const a = document.createElement('a');
					a.href = url;
					a.download = 'payment-receipt.html';
					a.click();
					URL.revokeObjectURL(url);
				}

				async function shareReceipt() {
					if (navigator.share) {
						try {
							await navigator.share({
								title: 'Payment Receipt',
								text: 'Here is my Surya Car Pool payment receipt.',
								url: window.location.href
							});
						} catch (err) {
							console.error('Share failed:', err);
						}
					} else {
						alert('Sharing is not supported on this device.');
					}
				}
			</script>
</body>

</html>