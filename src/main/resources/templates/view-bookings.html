<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>View Bookings - Surya Car Pool</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

	<style>
		body {
			min-height: 100vh;
			background: linear-gradient(135deg, #667eea, #764ba2);
			font-family: "Segoe UI", sans-serif;
		}

		.page-title {
			color: #fff;
			text-align: center;
			margin-bottom: 30px;
		}

		.booking-card {
			border: none;
			border-radius: 16px;
			box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
			transition: transform 0.2s ease, box-shadow 0.2s ease;
		}

		.booking-card:hover {
			transform: translateY(-6px);
			box-shadow: 0 18px 40px rgba(0, 0, 0, 0.25);
		}

		.badge-status {
			font-size: 0.85rem;
			padding: 6px 10px;
		}

		.card-icon {
			font-size: 1.4rem;
			color: #0d6efd;
			margin-right: 8px;
		}

		.no-data {
			color: #fff;
			text-align: center;
			margin-top: 50px;
			font-size: 1.2rem;
		}
	</style>
</head>

<body>
	<div class="container py-5">

		<h1 class="page-title fw-bold">
			<i class="bi bi-car-front-fill"></i> View Bookings
		</h1>

		<div id="bookingsRow" class="row g-4"></div>

		<div id="noBookings" class="no-data d-none">
			<i class="bi bi-info-circle"></i> No bookings found.
		</div>
	</div>

	<script>
		fetch('/api/bookings')
			.then(response => response.json())
			.then(data => {
				const row = document.getElementById('bookingsRow');
				const noData = document.getElementById('noBookings');

				if (!data || data.length === 0) {
					noData.classList.remove('d-none');
					return;
				}

				data.forEach(booking => {
					const col = document.createElement('div');
					col.className = 'col-md-6 col-lg-4';

					col.innerHTML = `
                    <div class="card booking-card h-100">
                        <div class="card-body">
                            <h5 class="card-title fw-bold mb-3">
                                <i class="bi bi-person-fill card-icon"></i>
                                ${booking.customerName ?? 'Customer'}
                            </h5>

                            <p class="mb-2">
                                <i class="bi bi-car-front card-icon"></i>
                                <strong>Car ID:</strong> ${booking.carId ?? 'N/A'}
                            </p>

                            <p class="mb-2">
                                <i class="bi bi-geo-alt card-icon"></i>
                                <strong>Pickup:</strong> ${booking.pickupLocation ?? 'N/A'}
                            </p>

                            <p class="mb-3">
                                <i class="bi bi-geo card-icon"></i>
                                <strong>Drop:</strong> ${booking.dropLocation ?? 'N/A'}
                            </p>

                            <span class="badge bg-success badge-status">
                                ${booking.status ?? 'CONFIRMED'}
                            </span>
                        </div>
                    </div>
                `;
					row.appendChild(col);
				});
			})
			.catch(error => {
				console.error('Error loading bookings:', error);
			});
	</script>

</body>

</html>