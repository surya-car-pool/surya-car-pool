<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Bookings - Surya Car Pool</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
	<style>
		body {
			min-height: 100vh;
			background: linear-gradient(135deg,
					#ffecd2,
					#fcb69f,
					#a1c4fd,
					#c2e9fb,
					#d4fc79);
			background-attachment: fixed;
		}

		.content-wrapper {
			backdrop-filter: blur(10px);
			background: rgba(255, 255, 255, 0.75);
			border-radius: 15px;
			padding: 25px;
			margin-top: 30px;
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
		}

		.hero-section {
			background: linear-gradient(135deg, rgba(13, 110, 253, 0.85), rgba(59, 139, 255, 0.85));
			color: white;
			padding: 60px 20px;
			border-radius: 15px;
			text-align: center;
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
		}

		.contact-card {
			border-radius: 15px;
			background: rgba(255, 255, 255, 0.85);
			backdrop-filter: blur(6px);
			transition: transform 0.2s ease-in-out;
		}

		.contact-card:hover {
			transform: translateY(-5px);
		}

		.contact-icon {
			font-size: 2.3rem;
			color: #0d6efd;
		}

		/* Navbar icons */
		.nav-link i {
			color: rgb(255, 128, 64);
			margin-right: 4px;
		}

		/* Page title icon */
		.page-title i {
			color: #0d6efd;
		}

		/* Action icon */
		.btn-update i {
			color: #ffffff;
		}

		/* Info icon (No bookings) */
		.no-data i {
			color: #ff6b6b;
			font-size: 1.3rem;
		}

		/* Table container */
		.table-card {
			background: rgba(255, 255, 255, 0.92);
			border-radius: 14px;
			padding: 16px;
			box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
		}

		/* Table header */
		.table thead th {
			background: linear-gradient(135deg, #0d6efd, #3b8bff);
			color: #ffffff;
			text-align: center;
			vertical-align: middle;
			border: none;
			font-size: 0.9rem;
		}

		/* Table body cells */
		.table tbody td {
			vertical-align: middle;
			text-align: center;
			border-color: #dee2e6;
			font-size: 0.88rem;
		}

		/* Hover effect */
		.table-hover tbody tr:hover {
			background-color: rgba(13, 110, 253, 0.08);
		}

		/* Status badge */
		.badge-booked {
			background: linear-gradient(135deg, #22c55e, #16a34a);
			color: #ffffff;
			padding: 5px 10px;
			border-radius: 999px;
			font-size: 0.75rem;
		}

		/* Update button */
		.btn-update {
			background: linear-gradient(135deg, #f59e0b, #f97316);
			color: white;
			border-radius: 999px;
			border: none;
		}

		.btn-update:hover {
			background: linear-gradient(135deg, #f97316, #ea580c);
		}

		.file-input-label i {
			color: #0d6efd;
			margin-right: 6px;
		}

		.file-input-label small {
			display: block;
			color: #6b7280;
		}

		.form-section-divider {
			height: 1px;
			background: linear-gradient(to right, rgba(148, 163, 184, 0.1), rgba(148, 163, 184, 0.7), rgba(148, 163, 184, 0.1));
			margin: 8px 0 14px;
		}

		.btn-gradient {
			background: linear-gradient(135deg, #22c55e, #16a34a);
			border: none;
			border-radius: 999px;
			padding: 10px 22px;
			font-weight: 600;
			display: inline-flex;
			align-items: center;
			gap: 6px;
			box-shadow: 0 8px 20px rgba(22, 163, 74, 0.35);
		}

		.btn-gradient:hover {
			background: linear-gradient(135deg, #16a34a, #15803d);
			box-shadow: 0 10px 24px rgba(22, 163, 74, 0.45);
		}

		.navbar-custom {
			background: rgba(15, 23, 42, 0.95);
			backdrop-filter: blur(8px);
		}

		.brand-title {
			font-weight: 700;
			letter-spacing: 0.03em;
		}

		.brand-tagline {
			font-size: 0.8rem;
		}

		/* Card that wraps the form */
		.payment-card {
			border-radius: 18px;
			border: 1px solid #e5e7eb;
			background: #ffffff;
			box-shadow: 0 12px 30px rgba(0, 0, 0, 0.08);
		}

		/* Section card */
		.section-card {
			background: #ffffff;
			border: 1px solid #e5e7eb;
			border-radius: 14px;
			padding: 18px;
			margin-bottom: 18px;
		}

		/* Section header */
		.section-header {
			display: flex;
			align-items: center;
			gap: 10px;
			font-weight: 600;
			font-size: 0.95rem;
			color: #0f172a;
		}

		.section-header i {
			color: #0d6efd;
			font-size: 1.1rem;
		}

		/* Section titles */
		.section-title {
			font-weight: 700;
			color: #0f172a;
		}

		/* Sub text */
		.sub-text {
			font-size: 0.85rem;
			color: #64748b;
		}

		/* Form labels */
		.form-label {
			font-size: 0.8rem;
			font-weight: 600;
			color: #334155;
		}

		/* Inputs & selects */
		.form-control,
		.form-select {
			border-radius: 10px;
			border: 1px solid #cbd5e1;
			font-size: 0.88rem;
			padding: 10px 12px;
		}

		/* Input focus */
		.form-control:focus,
		.form-select:focus {
			border-color: #0d6efd;
			box-shadow: 0 0 0 0.15rem rgba(13, 110, 253, 0.15);
		}

		/* Input groups */
		.input-group-text {
			border-radius: 10px 0 0 10px;
			background: #f8fafc;
			border: 1px solid #cbd5e1;
		}

		/* File upload */
		.file-input-label {
			border: 1px dashed #94a3b8;
			border-radius: 12px;
			padding: 14px;
			background: #f8fafc;
			cursor: pointer;
		}

		.file-input-label:hover {
			background: #f1f5f9;
		}

		/* Mandatory star */
		.text-danger {
			font-weight: 700;
		}

		/* Secure badge */
		.badge-soft {
			background: rgba(34, 197, 94, 0.15);
			color: #166534;
			font-size: 0.7rem;
			padding: 6px 10px;
			border-radius: 999px;
			font-weight: 600;
		}

		/* Submit button alignment */
		.btn-gradient {
			font-size: 0.9rem;
		}

		/* Validation feedback */
		.invalid-feedback {
			font-size: 0.7rem;
		}

		/* Responsive spacing */
		@media (max-width: 768px) {
			.section-card {
				padding: 14px;
			}
		}
	</style>
</head>

<body>
	<!-- NAVBAR -->
	<nav class="navbar navbar-expand-lg navbar-dark navbar-custom">
		<div class="container">
			<a class="navbar-brand d-flex align-items-center brand-logo" href="/home" aria-label="Surya Car Pool home">
				<svg class="brand-svg" viewBox="0 0 64 64" xmlns="/images/logo.png" role="img"
					aria-labelledby="logoTitle logoDesc">
					<title id="logoTitle">Surya Car Pool logo</title>
					<desc id="logoDesc">Sun rising above a road — Surya Car Pool</desc>
					<img src="/images/logo.png" alt="Surya Car Pool"
						style="width:70px; height:70px; border-radius:14px; object-fit:contain;" />
					<rect width="64" height="64" rx="10" fill="url(#g1)" />
					<circle cx="20" cy="18" r="8" fill="#fff5d6" />
					<path d="M6 44 C18 38,46 38,58 44 L58 50 C46 44,18 44,6 50 Z" fill="#0f1724" />
					<g stroke="#ffd166" stroke-width="1.8" stroke-linecap="round">
						<path d="M12 43 L16 43" stroke-dasharray="4 3" />
						<path d="M24 42 L28 42" stroke-dasharray="4 3" />
						<path d="M36 42 L40 42" stroke-dasharray="4 3" />
						<path d="M48 43 L52 43" stroke-dasharray="4 3" />
					</g>
					<path d="M18 36 h10 l3-5 h8 l3 5 h3 v3 h-30 v-3 z" fill="#fff" />
				</svg>

				<div class="d-flex flex-column ms-2">
					<span class="brand-title text-white">Surya Car Pool</span>
					<span class="brand-tagline text-white-50">Self Drive Cars Provider</span>
				</div>

				<span class="ms-3 badge bg-white text-dark align-self-start" style="font-weight:600">Trusted</span>
			</a>

			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMain">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse" id="navMain">
				<ul class="navbar-nav ms-auto mb-2 mb-lg-0">
					<li class="nav-item">
						<a class="nav-link" href="/home">
							<i class="bi bi-house-door-fill"></i> Home
						</a>
					</li>

					<li class="nav-item">
						<a class="nav-link" href="/users/ui">
							<i class="bi bi-people-fill"></i> Users
						</a>
					</li>

					<li class="nav-item">
						<a class="nav-link" href="/rides/ui">
							<i class="bi bi-car-front-fill"></i> Rides
						</a>
					</li>

					<li class="nav-item">
						<a class="nav-link active" aria-current="page" href="/bookings/ui">
							<i class="bi bi-journal-check"></i> Bookings / Book a Car
						</a>
					</li>

					<li class="nav-item">
						<a class="nav-link" href="/aboutus/ui">
							<i class="bi bi-info-circle-fill"></i> About Us
						</a>
					</li>

					<li class="nav-item">
						<a class="nav-link" href="/contactus/ui">
							<i class="bi bi-envelope-fill"></i> Contact Us
						</a>
					</li>
				</ul>
			</div>
		</div>
	</nav>

	<div class="container content-wrapper">
		<div class="hero-section">
			<h1 class="h3 mb-2"><i class="bi bi-car-front-fill"></i> Book a Car</h1>
			<p class="mb-0">
				Choose your car, fill in your trip, customer and KYC details, upload documents and confirm your booking.
			</p>
		</div>

		<div class="row g-4 mt-1">
			<!-- Existing bookings info -->
			<div class="col-lg-5">
				<h2 class="section-title"><i class="bi bi-journal-check"></i> Existing Bookings</h2>
				<p class="text-muted small">
					List of existing bookings is currently available.
				</p>

				<a href="/view-bookings" class="btn btn-outline-primary btn-sm mb-3">
					<i class="bi bi-box-arrow-up-right"></i> Manage Booked Cars
				</a>

				<div class="mt-3 p-3 rounded-4 border border-1 border-light bg-light bg-opacity-75">
					<div class="d-flex align-items-center mb-2">
						<i class="bi bi-shield-check text-success me-2"></i>
						<strong class="small">Why we ask for KYC details?</strong>
					</div>
					<ul class="small mb-0 ps-3">
						<li>To verify your identity and driving eligibility.</li>
						<li>To comply with safety, insurance and regulatory requirements.</li>
						<li>To enable faster check-in for future bookings.</li>
					</ul>
				</div>
			</div>

			<!-- Booking / Customer / KYC / Payment form -->
			<div class="col-lg-7">
				<div class="card payment-card">
					<div class="card-body">
						<div class="d-flex justify-content-between align-items-center mb-2">
							<h2 class="section-title mb-0">
								<i class="bi bi-credit-card-2-front"></i> Booking & Customer Details
							</h2>
							<span class="badge-soft">
								<i class="bi bi-shield-lock"></i> Data kept secure
							</span>
						</div>
						<p class="sub-text mb-3">
							Please fill in all required fields carefully. Fields marked with <span
								class="text-danger">*</span> are mandatory.
						</p>

						<!-- Wrap with th:with so nested fragments can access model vars reliably -->
						<div th:with="ignored=${carId}">
							<!-- Client-side validation alert -->
							<div id="formAlert" class="alert alert-danger d-none" role="alert">
								<i class="bi bi-exclamation-triangle-fill me-1"></i>
								Please fill all mandatory fields marked with <strong>*</strong> before submitting the
								booking.
							</div>

							<form th:action="@{/bookings}" th:object="${bookingForm}" th:method="post"
								enctype="multipart/form-data" class="needs-validation" novalidate>
								<div class="row g-3">

									<!-- SECTION: Car & Trip Details -->
									<div class="section-card">
										<div class="section-header">
											<i class="bi bi-car-front"></i>
											<span>Car &amp; Trip Details</span>
										</div>
										<div class="form-section-divider"></div>
										<div class="row g-3">
											<div class="col-md-4">
												<label class="form-label">Car ID <span
														class="text-danger">*</span></label>
												<input type="text" class="form-control" th:field="*{carId}" readonly>
											</div>

											<div class="col-md-8">
												<label class="form-label">Pickup Location <span
														class="text-danger">*</span></label>
												<input type="text" class="form-control" th:field="*{pickupLocation}"
													placeholder="Enter your pickupLocation" required>
												<div class="invalid-feedback">
													Pickup location is required.
												</div>

											</div>

											<div class="col-md-6">
												<label class="form-label">Pickup Date &amp; Time <span
														class="text-danger">*</span></label>
												<input type="datetime-local" class="form-control"
													th:field="*{pickupDateTime}" required>
												<div class="invalid-feedback">
													Pickup date & time is required.
												</div>

											</div>

											<div class="col-md-6">
												<label class="form-label">Drop Date &amp; Time <span
														class="text-danger">*</span></label>
												<input type="datetime-local" class="form-control"
													th:field="*{dropDateTime}" required>
												<div class="invalid-feedback">
													Drop date & time is required.
												</div>

											</div>
										</div>
									</div>

									<!-- SECTION: Customer Details -->
									<div class="section-card">
										<div class="section-header">
											<i class="bi bi-person-badge"></i>
											<span>Customer Details</span>
										</div>
										<div class="form-section-divider"></div>
										<div class="row g-3">
											<div class="col-md-6">
												<label class="form-label">Customer Name <span
														class="text-danger">*</span></label>
												<input type="text" class="form-control" th:field="*{customerName}"
													required>
												<div class="invalid-feedback">
													Customer name is required.
												</div>

											</div>

											<div class="col-md-6">
												<label class="form-label">Email <span
														class="text-danger">*</span></label>
												<div class="input-group">
													<span class="input-group-text"><i class="bi bi-envelope"></i></span>
													<input type="email" class="form-control" th:field="*{email}"
														required>
													<div class="invalid-feedback">
														Valid email address is required.
													</div>

												</div>
											</div>

											<div class="col-md-6">
												<label class="form-label">Phone Number <span
														class="text-danger">*</span></label>
												<div class="input-group">
													<span class="input-group-text"><i
															class="bi bi-telephone"></i></span>
													<input type="tel" class="form-control" th:field="*{phone}"
														pattern="[0-9]{10}" required>
													<div class="invalid-feedback">
														Enter a valid 10-digit mobile number.
													</div>

												</div>
											</div>

											<div class="col-md-6">
												<label class="form-label">Customer Address <span
														class="text-danger">*</span></label>
												<input type="text" class="form-control" th:field="*{customerAddress}"
													placeholder="House / Flat, Street, Area, City">
											</div>

											<div class="col-12">
												<label class="form-label">Additional Notes</label>
												<textarea class="form-control" th:field="*{notes}" rows="2"
													placeholder="Anything the driver should know (landmark, preferences, etc.)"></textarea>
											</div>
										</div>
									</div>

									<!-- SECTION: Identity / KYC Details -->
									<div class="section-card">
										<div class="section-header">
											<i class="bi bi-file-person"></i>
											<span>Identity &amp; KYC Details</span>
										</div>
										<div class="form-section-divider"></div>
										<div class="row g-3">
											<div class="col-md-6">
												<label class="form-label">Driving License Number <span
														class="text-danger">*</span></label>
												<input type="text" class="form-control"
													th:field="*{drivingLicenseNumber}" required>
												<div class="invalid-feedback">
													Driving license number is required.
												</div>

											</div>

											<div class="col-md-3">
												<label class="form-label">DL Expiry Date <span
														class="text-danger">*</span></label>
												<input type="date" class="form-control"
													th:field="*{drivingLicenseExpiry}" required>
												<div class="invalid-feedback">
													Driving license expiry date is required.
												</div>

											</div>

											<div class="col-md-3">
												<label class="form-label">DL Issuing State</label>
												<input type="text" class="form-control"
													th:field="*{drivingLicenseState}" placeholder="Issuing State">
											</div>

											<div class="col-md-6">
												<label class="form-label">Aadhar Card Number <span
														class="text-danger">*</span></label>
												<input type="text" class="form-control" th:field="*{aadharNumber}"
													pattern="[0-9]{12}" required>
												<div class="invalid-feedback">
													Enter a valid 12-digit Aadhar number.
												</div>

											</div>

											<div class="col-md-6">
												<label class="form-label">Fixed Deposit Amount (₹)</label>
												<input type="number" min="0" step="0.01" class="form-control"
													th:field="*{fixedDepositAmount}">
											</div>
										</div>
									</div>
									<!-- SECTION: Document Uploads -->
									<div class="section-card">
										<div class="section-header">
											<i class="bi bi-cloud-arrow-up"></i>
											<span>Upload Documents</span>
										</div>
										<div class="form-section-divider"></div>
										<div class="row g-3">
											<div class="col-12">
												<label class="form-label">Address Proof <span
														class="text-danger">*</span></label>
												<label class="file-input-label w-100">
													<i class="bi bi-file-earmark-arrow-up"></i>
													<span>Upload address proof document (Aadhar, Passport, Utility Bill,
														etc.)</span>
													<small>Accepted formats: PDF, JPG, PNG (Max size as per
														policy)</small>
													<input type="file" class="form-control mt-2" name="addressProofFile"
														accept=".pdf,image/*" required>
													<div class="invalid-feedback">
														Address proof document is required.
													</div>

												</label>
											</div>

											<div class="col-12">
												<label class="form-label">Driving License Copy <span
														class="text-danger">*</span></label>
												<label class="file-input-label w-100">
													<i class="bi bi-file-earmark-arrow-up"></i>
													<span>Upload clear copy / photo of your driving license</span>
													<small>Accepted formats: PDF, JPG, PNG (Front & back if
														possible)</small>
													<input type="file" class="form-control mt-2"
														name="drivingLicenseFile" accept=".pdf,image/*" required>
													<div class="invalid-feedback">
														Driving license copy is required.
													</div>

												</label>
											</div>
										</div>
									</div>

								</div>

								<div
									class="mt-3 d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center">
									<button type="submit" class="btn btn-gradient">
										<i class="bi bi-check-circle"></i>
										<span>Confirm Booking</span>
									</button>
								</div>
							</form>
						</div>

					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- FOOTER -->
	<footer class="bg-dark text-light mt-5">
		<div class="container py-4 text-center small" style="color: brown;">
			© Surya Car Pool -2025 · All rights reserved
		</div>
		<div class="text-center text-muted small py-2" style="background:rgba(0,0,0,0.04)">
			Need help? Email <a href="mailto:support@suryacarpool.example"
				class="text-muted">support@suryacarpool.example</a> · Terms apply
		</div>
	</footer>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
	<script>
		(() => {
			const form = document.querySelector('.needs-validation');
			const alertBox = document.getElementById('formAlert');

			form.addEventListener('submit', event => {
				if (!form.checkValidity()) {
					event.preventDefault();
					event.stopPropagation();
					alertBox.classList.remove('d-none');
					alertBox.scrollIntoView({behavior: 'smooth', block: 'center'});
				} else {
					alertBox.classList.add('d-none');
				}
				form.classList.add('was-validated');
			}, false);
		})();
	</script>
</body>

</html>