<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Create account — Surya Car Pool</title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
	<link href="/static/styles.css" rel="stylesheet">
	<style>
		.auth-wrapper {
			min-height: 100vh;
			background: linear-gradient(180deg, #fbfdff, #eef3f7);
		}

		.card-auth {
			border-radius: 12px;
		}

		.nav-link i {
			color: rgb(255, 128, 64);
			margin-right: 4px;
		}
	</style>
</head>

<body class="auth-wrapper d-flex align-items-center">
	<div class="container">
		<div class="row justify-content-center">
			<div class="col-12 col-md-9 col-lg-6">
				<div class="card card-auth shadow-sm">
					<div class="card-body p-4 p-md-5">
						<div class="d-flex align-items-center mb-4">
							<img src="/static/logo.svg" alt="Surya Car Pool" style="height:40px" class="me-3">
							<div>
								<div class="h5 mb-0">Create your account</div>
								<small class="text-muted">Quick sign up to start booking rides.</small>
							</div>
						</div>

						<!-- Thymeleaf integration example: th:action="@{/register}" method="post" -->
						<form id="registerForm" class="needs-validation" novalidate th:action="@{/register}"
							method="post">
							<div class="mb-3">
								<label for="fullName" class="form-label">Full name</label>
								<input id="fullName" name="name" type="text" class="form-control" placeholder="Jane Doe"
									required>
								<div class="invalid-feedback">Please enter your name.</div>
							</div>

							<div class="row g-2">
								<div class="col-md-6 mb-3">
									<label for="email" class="form-label">Email</label>
									<input id="email" name="email" type="email" class="form-control"
										placeholder="you@example.com" required>
									<div class="invalid-feedback">Please enter a valid email.</div>
								</div>

								<div class="col-md-6 mb-3">
									<label for="phone" class="form-label">Phone</label>
									<input id="phone" name="phone" type="tel" class="form-control"
										placeholder="9876543210" pattern="^\+?\d{7,15}$" required>
									<div class="invalid-feedback">Please enter a valid phone number.</div>
								</div>
							</div>

							<div class="row g-2">
								<div class="col-md-6 mb-3">
									<label for="password1" class="form-label">Password</label>
									<input id="password1" name="password" type="password" class="form-control"
										placeholder="Create password (min 6 chars)" minlength="6" required>
									<div class="invalid-feedback">Password must be at least 6 characters.</div>
								</div>

								<div class="col-md-6 mb-3">
									<label for="password2" class="form-label">Confirm password</label>
									<input id="password2" type="password" class="form-control"
										placeholder="Confirm password" required>
									<div class="invalid-feedback">Passwords must match.</div>
								</div>
							</div>

							<div class="mb-3 form-check">
								<input id="terms" name="terms" type="checkbox" class="form-check-input" required>
								<label for="terms" class="form-check-label">I agree to the <a href="/terms">Terms &
										Conditions</a>.</label>
								<div class="invalid-feedback">You must accept the terms to continue.</div>
							</div>

							<div class="d-grid mb-3">
								<button id="registerBtn" class="btn btn-success btn-lg" type="submit">
									<i class="bi bi-person-plus me-2"></i> Create account
								</button>
							</div>

							<div class="text-center">
								<small class="text-muted">Already have an account? <a href="/login">Sign in</a></small>
							</div>
						</form>
					</div>
				</div>

				<p class="text-center mt-3 small text-muted">© Surya Car Pool</p>
			</div>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

	<script>
		// Client-side validation + demo local fallback if no backend endpoint is used.
		(function () {
			'use strict';
			const form = document.getElementById('registerForm');

			form.addEventListener('submit', function (e) {
				e.preventDefault();
				e.stopPropagation();
				form.classList.add('was-validated');

				// password match check
				const p1 = document.getElementById('password1');
				const p2 = document.getElementById('password2');
				if (p1.value !== p2.value) {
					p2.setCustomValidity('Passwords do not match');
				} else {
					p2.setCustomValidity('');
				}

				if (!form.checkValidity()) {
					return;
				}

				// If an action (server endpoint) is provided by Thymeleaf, allow normal submit.
				const action = form.getAttribute('action') || '';
				if (action && action !== '#') {
					form.submit();
					return;
				}

				// Demo fallback: create local profile
				const user = {
					name: document.getElementById('fullName').value.trim(),
					email: document.getElementById('email').value.trim(),
					phone: document.getElementById('phone').value.trim(),
					createdAt: new Date().toISOString()
				};
				localStorage.setItem('scp_user', JSON.stringify(user));
				// After registration, redirect to login with success message
				window.location.href = '/login?registered=1';
			}, false);
		})();
	</script>
	<!-- FOOTER -->
	<footer class="bg-dark text-light mt-5">
		<div class="container py-4 text-center small" style="color: brown;">
			© Surya Car Pool -2025 · All rights reserved
		</div>
		<div class="text-center text-muted small py-2" style="background:rgba(0,0,0,0.04)">
			Need help? Email <a href="mailto:support@suryacarpool.example"
				class="text-muted">support@suryacarpool.example</a> · Terms apply
		</div>
	</footer>
</body>

</html>